<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta name="description" content="Preschool kids apps">

	<meta name="keywords" content="ABCs, counting, math, drawing">

	<meta name="author" content="marLindaT">



	<title>School Yard: Matching Game</title>


<style>
html{
	background-image: linear-gradient(rgba(255,0,0,0), rgba(255,0,0,1));
	background-repeat: no-repeat;

}
#container{
	display: flex;
	flex-direction: row;
	justify-content: space-between;
	height: 95vh;

}
.side{
	display: flex;
	flex-direction: column;
	background: white;

}
div{
	display: inline-block;
	padding: 10px;
	margin: 15px;
	border: black solid 2px;
}
.card{
	background: green;
}
.card:hover{
	background: yellow;
	color: blue;
	cursor: pointer;
}
.selected{
	transform: scale(1.2);
	border: red dashed 3px;
}
.disabled{
	display: none;
}
</style>
</head>
<body>

<div id="container">


	<div id = "leftSide" class="side">

		<div id="l-red" class="question card left" title="apple">Apple</div>

		<div id="l-green" class="question card left" title="banana">Banana</div>

		

	</div>



	<div id="rightSide" class="side">

		<div  class="answer card right" title="apple" >APPLE</div>

		<div  class="answer card right" title="banana">BANANA</div>


	</div>


</div>


<script>

let alphaArr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p","q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

function createElements(arr){



let result = arr.forEach(function(item){
	let newDiv = document.createElement("DIV");
	let newContent = document.createTextNode(item);

	newDiv.appendChild(newContent);

	let currentDiv = document.getElementById("leftSide");
	document.body.insertBefore(newDiv, currentDiv);

})
};

createElements(alphaArr);


let score = 0;
let tries = 0;

let test = document.getElementsByClassName("card");
let cards = [...test];

//apply event listener to every element with .card
//event listener for click which toggles class type for "this" card
for (let i=0; i<cards.length; i++){
	cards[i].addEventListener("click", toggleClass, false);
	cards[i].addEventListener("click", runGame, false);
};


//applies .selected to card element if called via above eventListener
function toggleClass(){
	this.classList.toggle("selected");
};

function removeToggledClasses(arr, rmclass){
	for(let i=0; i<arr.length; i++){
		if(arr[i].classList.contains(rmclass)){
			arr[i].classList.remove(rmclass);
		}
	}
};

function checkAnswer(arr){
	//check for exactly 1 selection from each .right and .left
	let left =0;
	let right=0;
	let rightAns, leftAns;
	//looping through arr capture items with .left and .right
	//store these elements for later comparison
	for(let i=0; i<arr.length; i++){
		if(arr[i].classList.contains("left") && arr[i].classList.contains("selected")){
			leftAns = arr[i];
			left+=1;
		}else if(arr[i].classList.contains("right") && arr[i].classList.contains("selected")){
			rightAns = arr[i];
			right+=1;
		}
	//if more than one choice from either .right or .left
	//alert the user
	//clear all the selected classes
	//exit function
		if(left > 1 || right > 1){
			alert("CHOOSE ONLY ONE FROM EACH SIDE");
			removeToggledClasses(arr, "selected");
			return null;
		}
	}
	//compare left and right choice elements for title equivalency
	//remove .selected and adjust tries and score
	if (leftAns && rightAns){
		if(leftAns.title == rightAns.title){
			disabled(arr, "selected");
			removeToggledClasses(cards, "selected");
			score+=1;
			tries+=1;
			alert("MATCH");
		}else{
			removeToggledClasses(cards, "selected");
			tries+=1;
			alert("SORRY NOT A MATCH")
		}
	}
};

function disabled(arr, titleName){
	for(let i=0; i<arr.length; i++){
		if(arr[i].classList.contains(titleName)){
			arr[i].classList.toggle("disabled");
		}
	}

};

function runGame(){
	checkAnswer(cards);

};

</script>

</body>
</html>